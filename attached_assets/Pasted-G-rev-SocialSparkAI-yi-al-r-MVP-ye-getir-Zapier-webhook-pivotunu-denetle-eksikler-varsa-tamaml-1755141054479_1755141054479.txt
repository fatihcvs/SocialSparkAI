GÃ¶rev: SocialSparkAIâ€™yi Ã§alÄ±ÅŸÄ±r MVPâ€™ye getir. Zapier webhook pivotunu denetle, eksikler varsa tamamla, tek ORM olarak Drizzleâ€™Ä± kullan, gÃ¼venlik & .env & test adÄ±mlarÄ±nÄ± hazÄ±rla.

1) Env & README

KÃ¶k .env.example iÃ§indeki anahtarlarÄ± doÄŸrula/ekle:

NODE_ENV=development
PORT=
DATABASE_URL=postgres://... # (Drizzle/Postgres) â€“ Replitâ€™te yoksa geÃ§ici sqlite kullan
JWT_SECRET=
OPENAI_API_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_PRICE_PRO_MONTH=
ZAPIER_HOOK_URL=
BUFFER_ACCESS_TOKEN=
BUFFER_PROFILE_ID=
VITE_API_BASE_URL=
VITE_STRIPE_PUBLISHABLE_KEY=


READMEâ€™de Zapier â€œCatch Hookâ€ kurulumunu ve Ã¶rnek cURLâ€™Ã¼ gÃ¼ncelle (aÅŸaÄŸÄ±daki endpoint ismiyle birebir).

2) Server altyapÄ±sÄ±

server/src/index.(ts|js) iÃ§inde helmet, cors, express.json, express-rate-limit ekle; app.get('/api/health') ile health-check ekle; port process.env.PORT.

Router baÄŸla: app.use('/api/integrations', integrationsRouter) (yoksa oluÅŸtur).

3) Zapier webhook rotasÄ±

server/src/routes/integrations.(ts|js) oluÅŸtur/gÃ¼ncelle:

POST /api/integrations/zapier/publish

Body Zod ile doÄŸrulansÄ±n: { caption: string; imageUrl?: string; platform?: string; scheduledAt?: string }

axios.post(process.env.ZAPIER_HOOK_URL!, body) â†’ baÅŸarÄ±da res.status(202).json({ok:true}), hata res.status(502).json({ok:false, error:'ForwardFailed', detail}).

!process.env.ZAPIER_HOOK_URL ise 400 {error:'MissingHook'} dÃ¶n.

4) ORM tekilleÅŸtirme (Drizzle)

Drizzle kalacak: Drizzle dÄ±ÅŸÄ±ndaki ORM dosyalarÄ±nÄ±/komutlarÄ±nÄ± temizle.

Migration/seed komutlarÄ±nÄ± package.jsonâ€™a ekle (dev ortamda sqlite istersen better-sqlite3 ile de Ã§alÄ±ÅŸabilir).

5) Client gÃ¼ncellemesi

â€œSchedule via Bufferâ€ butonunu â€œSend to Zapier/Makeâ€ yap ve POST /api/integrations/zapier/publishâ€™e isteÄŸi gÃ¶nder.

VITE_API_BASE_URL kullanÄ±larak Ã§aÄŸrÄ± yapÄ±lsÄ±n; ZAPIER_HOOK_URL yoksa buton gizlensin.

6) Scriptâ€™ler

KÃ¶k package.jsonâ€™a ÅŸu scriptleri ekle/gÃ¼ncelle:

"dev": "npm --prefix server run dev & npm --prefix client run dev"

"start": "npm --prefix server run start"

"postinstall": "npm --prefix server i && npm --prefix client i"

7) Testler (READMEâ€™ye de yaz)

Health: GET /api/health â†’ {"ok":true}

Ideas: POST /api/ai/generate/ideas â†’ 3+ fikir JSON

Caption/Image: ilgili endpointler 200 dÃ¶ner

Zapier publish (Ã¶rnek cURL):

curl -X POST "$API_BASE/api/integrations/zapier/publish" \
 -H "Content-Type: application/json" \
 -d '{"caption":"Hello from SocialSparkAI ğŸš€","imageUrl":"https://picsum.photos/800","platform":"instagram","scheduledAt":"2025-08-20T10:00:00Z"}'


Beklenen: 202 {"ok":true} ve Zapierâ€™de talep gÃ¶rÃ¼nÃ¼r.

Stripe checkout/webhook testi (READMEâ€™deki test kartÄ± ile).

8) Ã‡Ä±ktÄ±

DeÄŸiÅŸtirilen/eklenen dosyalarÄ±, eklenen paketleri ve Ã§alÄ±ÅŸtÄ±rma komutlarÄ±nÄ± Ã¶zet olarak yaz.